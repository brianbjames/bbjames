<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Panski</title>
<style type="text/css">
<!--
.style1 {font-family: Monaco}
-->
</style>
</head>

<body>
<p class="style1">// Panski, based on a couple of examples in SC3, by brian b. james <br />
  (<br />
var w, ff, dd, valuess, server, idd, isOnn = false, b17, b18;</p>
<p class="style1">SynthDef(&quot;Panski&quot;, // Panski</p>
<p class="style1">{<br />
  var a;</p>
<p class="style1"> a = Pan2.ar(<br />
  Resonz.ar(LFPulse.ar(exprand(20,40), 2pi.rand, 0.05,<br />
  <br />
  Mix.ar(SinOsc.ar(exprand(0.3,8) * [rrand(0.07,0.09),1], [2pi.rand,2pi.rand], 0.1)).max(0)<br />
  * Mix.ar(SinOsc.ar(exprand(6,24) * [rrand(0.7,1.3),1], [2pi.rand,2pi.rand])).abs<br />
  ), exprand(100,110), 0.2), 1.0.rand2);<br />
  Out.ar(0, a);<br />
  }).writeDefFile;<br />
  Server.local.sendMsg(&quot;/d_load&quot;, &quot;synthdefs/Panski.scsyndef&quot;);</p>
<p class="style1">valuess = IdentityDictionary.new;<br />
  server = Server.local;</p>
<p class="style1">idd = 2007;<br />
  w = SCWindow(&quot;Panski&quot;, Rect(512, 164, 300, 80));<br />
  w.view.decorator = d = FlowLayout(w.view.bounds);</p>
<p class="style1">b17 = SCButton(w, Rect(210,0, 50, 50));<br />
  b17.states = [[&quot;Load&quot;, Color.black, Color.green]];<br />
  b17.action = { arg view; <br />
  server.sendMsg(&quot;/d_load&quot;, &quot;synthdefs/Panski.scsyndef&quot;);<br />
  };<br />
  b17.enabled = server.serverRunning;</p>
<p class="style1">b18 = SCButton(w, Rect(210,0, 200, 50));<br />
  b18.states = [<br />
  [&quot;Panski&quot;, Color.black, Color.green],<br />
  [&quot;Panski stop&quot;, Color.white, Color.red],<br />
  ];<br />
  b18.action = { arg view; <br />
  var msg;<br />
  if (view.value == 1, {<br />
  isOnn = true;<br />
  msg = [&quot;/s_new&quot;, &quot;Panski&quot;, 2007, 1, 0];<br />
  valuess.keysValuesDo({ arg key, value; <br />
  msg = msg.addAll([key, value]); <br />
  });<br />
  server.performList(\sendMsg, msg); <br />
  },{<br />
  isOnn = false;<br />
  server.sendMsg(&quot;/n_free&quot;, 2001); <br />
  });<br />
  };<br />
  b18.enabled = server.serverRunning;<br />
  d.nextLine;</p>
<p class="style1">a = SimpleController(server);<br />
  f = { arg server; <br />
  b17.enabled = server.serverRunning;<br />
  b18.enabled = server.serverRunning;<br />
  if (server.serverRunning.not, { b18.value = 0 });<br />
  };<br />
  a.put(\serverRunning, f);<br />
  w.onClose = { <br />
  if (isOnn, { server.sendMsg(&quot;/n_free&quot;, 2007) });<br />
  a.remove;<br />
  };<br />
  w.front;<br />
  )</p>
</body>
</html>
