<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Brian B. James</title></head>

<script language="javascript" src="http://www.bbjames.com/init.js"></script>
<script language="javascript" src="http://www.bbjames.com/processing.js"></script>
<script>
void setup(){  
  size(320, 240);  
  strokeWeight(2);  
  stroke(0);  
  noFill();    
}  
  
// Generic Looping Variables  
int n, i;  
  
// Controls the morph speed of the curve  
int rate=10;  
  
// Set Last Mouse X & Y for dist check  
int lastMouseX, lastMouseY;  
int distX, distY, lastDistXY;  
  
// Set sample rate and buffer arrays  
int sampleRate = 16, sampleLoc = 0;  
int lastSampleRate = sampleRate;  
int[] distXY = new int[sampleRate];  
int[] nextDistXY = new int[sampleRate];   
  
// Fill original target buffer  
for (i=0; i < sampleRate; i++) {   
  distXY[i] = height / 2;  
}   
  
  
void draw(){   
    
  // If the samplerate is set in the window...  
  if (window.Processing.data.sampleRate){          
    // Get the sample rate from the cwindow  
    sampleRate = window.Processing.data.sampleRate;      
    // If the sample rate has changed since last draw...      
    if (sampleRate!=lastSampleRate){        
      // Re-dimension buffers and transport indcator  
      lastSampleRate = sampleRate;  
      distXY = new int[sampleRate];  
      nextDistXY = new int[sampleRate];  
      sampleLoc=0;        
    }      
  }  
    
  // Set background color to to amplitude of sampleLoc     
  colorDelay = (255/sampleRate) * distXY[sampleLoc];    
  background(0, colorDelay/2, colorDelay, 100);  
    
  // Get mouse inputs  
  readMouse();  
    
  // Loop through buffer for length of sample rate  
  sampleLoc ++;  
    
  // Draw transport indicator for pos in sample buffer  
  fill(#0088aa);  
  stroke(#006688);  
  rect((((width-1)/sampleRate)*sampleLoc)-10, height-(height/20), 20, (height/20)-1);  
    
  // Reset playback location when end of buffer reached   
  if (sampleLoc==sampleRate){sampleLoc = 0;}             
    
  // Loop through samples  
  for (i=0; i < sampleRate; i++){        
      
    // Composite sample rate ruler over playback indicator   
    stroke(255, 255, 255, 100);  
    noFill();  
    strokeWeight(1);  
    rect(((width-1)/sampleRate)*i, height-(height/20), ((width-1)/sampleRate)-3, (height/20)-1);  
      
    // Morph old curve into new curve  
    if (nextDistXY[i] < distXY[i]) {      
        distXY[i] = distXY[i] - ((distXY[i] - nextDistXY[i]) / rate);  
    } else if (nextDistXY[i] > distXY[i]){  
        distXY[i] = distXY[i] + ((nextDistXY[i] - distXY[i]) / rate);  
    }  
  }  
    
  // Draw curve  
  noFill();  
  stroke(255);  
  strokeWeight(4);  
  beginShape();  
  curveVertex( (width/(sampleRate-1))*0, height/2 - distXY[0] );  
  for (n=0; n < sampleRate; n++){      
    curveVertex( (width/(sampleRate-1))*n, height/2 - distXY[n] );      
  }  
  curveVertex( (width/(sampleRate-1))*n-1, height/2 - distXY[n-1] );  
  endShape();  
      
}  
  
void readMouse(){    
  // Check lastMouseX has value to stop initial jump     
  if (!isNaN(lastMouseX)){                 
      
    // Calculate MouseX Movement Distance  
    if (mouseX > lastMouseX){distX = mouseX - lastMouseX;}  
    else {distX = lastMouseX - mouseX;}  
      
    // Calculate MouseY Movement Distance  
    if (mouseY > lastMouseY){distY = mouseY - lastMouseY;}  
    else {distY = lastMouseY - mouseY;}  
      
    //Combine total distance traveled  
    nextDistXY[sampleLoc] = distX + distY;  
    lastDistXY = distX + distY;      
  }  
    
  // Setup lastMouseX & Y for next movement  
  lastMouseX = mouseX;  
  lastMouseY = mouseY;  
}
</script>
<canvas width="1800px" height="1400px" style="position:absolute; left: 0px; top: 0px;"></canvas>
<body>
<div id="Layer25">
  <div align="right" class="style33">
    <div align="left"><a href="discography.html" class="style33">audio</a>  <a href="http://www.soundpressrecords.com"><span class="style33">soundpress records </span></a><span class="style33"><a href="software.html" class="style33"></a></span> </div>
  </div>
</div>
<div class="style32" id="Layer30">brian b. james</div>
<a href="leftBounce.mp3"></a>
<div class="style30" id="Layer5">
  <p align="left" class="style34">for more information: <span class="style33"><a href="mailto:admin@bbjames.com" class="style11">admin@bbjames.com</a>,</span> <br />
  last modified: april 2, 2010 &copy;  brian b. james</p>
</div>
</body>
</html>
