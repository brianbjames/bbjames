<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Rain</title>
<style type="text/css">
<!--
.style1 {font-family: Monaco}
-->
</style>
</head>

<body>
<p class="style1">//rain instrument, by brian b. james, based on code examples by chris brown at mills colege </p>
<p class="style1">(<br />
  var w, cloudFunc,cloudBtn,freqSlider,freqSldText;</p>
<p class="style1">cloudFunc = { <br />
  var cloudDuration=rrand(1,15), startTime,freq,dur,amp,density,<br />
  lofreq,hifreq,lodur=0.00005,hidur=0.03,loamp=0.001,hiamp=0.1;<br />
  startTime = thisThread.seconds; <br />
  density = rrand(0.0001,16);<br />
  lofreq = [40,20000,\exp].asSpec.map(freqSlider.lo);<br />
  hifreq =  [40,20000,\exp].asSpec.map(freqSlider.hi); <br />
  while({ thisThread.seconds  &lt; (startTime+cloudDuration) },{ <br />
  freq=rrand(lofreq,hifreq);<br />
  dur = rrand(lodur,hidur);<br />
  amp = rrand(loamp,hiamp);<br />
  Synth(&quot;granSin&quot;,[ <br />
  &quot;freq&quot;,freq,<br />
  &quot;dur&quot;, dur,&quot;amp&quot;,amp]);<br />
  (dur/density).wait; <br />
  }); <br />
  };</p>
<p class="style1">w = SCWindow(&quot;rain&quot;, Rect(10, 750, 153, 65)); <br />
  w.front;<br />
  w.view.background = Gradient(Color.blue,Color.white,\v);</p>
<p class="style1">cloudBtn = SCButton(w, Rect(63,0, 80, 20));<br />
  cloudBtn.states = [<br />
  [&quot;play&quot;, Color.black, Color.new(0.0, 0.5, 0.9)]];<br />
  cloudBtn.action = { arg view;<br />
  Routine(cloudFunc).play(AppClock); <br />
  };<br />
  freqSlider = SCRangeSlider(w, Rect(10,30, 133,20)).lo_(0).hi_(0);<br />
  freqSldText = SCStaticText(w, Rect(20,30, 100,20));<br />
  freqSldText.font = Font(&quot;Helvetica&quot;, 10);<br />
  freqSldText.stringColor = Color.blue;<br />
  freqSldText.align = \left;<br />
  freqSldText.string = &quot;freq&quot;; <br />
  )</p>
</body>
</html>
